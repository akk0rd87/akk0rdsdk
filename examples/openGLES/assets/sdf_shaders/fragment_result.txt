varying lowp vec4 result_color;
varying mediump vec2 result_uv;

//SDF data
uniform lowp vec4 sdf_outline_color;
uniform mediump vec4 sdf_params;

uniform lowp sampler2D base_texture;

lowp vec4 get_base_sdf()
{
	lowp float tx = texture2D(base_texture, result_uv).r;
     
#ifdef SDF_OUTLINE
    lowp float b =   min((tx - sdf_params.z) * sdf_params.w, 1.0);
    lowp float a = clamp((tx - sdf_params.x) * sdf_params.y, 0.0, 1.0);
	lowp vec4 res = (sdf_outline_color + (result_color - sdf_outline_color)*a) * b;
#else
	lowp float a = min((tx - sdf_params.x) * sdf_params.y, 1.0);
	lowp vec4 res = result_color * a;
#endif

    return res;
}

void main()
{	
	gl_FragColor = get_base_sdf();
}